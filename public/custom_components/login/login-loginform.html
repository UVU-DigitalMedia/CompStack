<dom-module id="login-loginform">

    <template>

        <h2>Welcome <span class="darken">Back!</span></h2>

        <div class="loginError">[[errorMessage]]</div>

        <div class="input-container">

            <iron-icon icon="social:person-outline"></iron-icon><paper-input value="{{email}}" id="email" label="Email"></paper-input><br/>

            <iron-icon icon="icons:lock-outline"></iron-icon><paper-input value="{{password}}" id="password" type="password" label="Password"></paper-input>

        </div>

        <paper-button class="login" on-tap="login">Login</paper-button>

        <h2><span class="line"></span>or<span class="line"></span></h2>

        <div class="btn-container">

            <paper-button class="login google" on-tap="googleLogin"><img class="btn-icon" src="/images/google.png"> Sign in with GOOGLE</paper-button>

            <paper-button class="login github" on-tap="githubLogin"><img class="btn-icon" src="/images/github.png"> Sign in with GITHUB</paper-button>

        </div>

    </template>

    <style>
        .input-container{
            width: 400px;
            margin: auto;
        }
        h2 {
            text-align: center;
        }
        .darken {
            color: #385768;
        }
        iron-icon, paper-input{
            display: inline-block;
        }
        paper-input{
            width: 375px;
        }
        .login {
            display: block;
            text-align: center;
            color: #fff;
            background-color: #385768;
            border-radius: 20px;
            width: 250px;
            margin: 24px auto 24px auto;
        }

        .line {
            display: inline-block;
            background-color: #8492af;
            height: 1px;
            width: 100px;
            vertical-align: middle;
        }
        .btn-container{
            display: block;
            width: 600px;
            margin: auto;
        }
        .google {
            display: inline-block;
            background-color: #da0000;
            width: 250px;
        }
        .github {
            display: inline-block;
            background-color: #808080;
            width: 250px;
        }
        .google, .github {
            margin: 24px;
        }
        .btn-container {
            display: block;
            width: 600px;
            margin: auto;
        }
        .btn-icon {
            height: 20px;
            vertical-align: middle;
        }
        .loginError{
            color: red;
            text-align: center;
        }
    </style>

    <script>

        Polymer({

            is: 'login-loginform',

            properties: {

                auth: Object,
                email: String,
                password: String,
                errorMessage: String,
                signedIn: {
                    type: Boolean,
                    notify: true
                }

            },

            validate: function(event){

                var valid = true;
                this.errorMessage = '';

                if(this.email == ''){

                    valid = false;
                    this.errorMessage += 'Email is required. ';

                }

                if(this.password == ''){

                    valid = false;
                    this.errorMessage += 'Password is required. ';

                }

                return valid;

            },

            login: function(){

                if(this.validate()){

                    auth.signInWithEmailAndPassword(this.email, this.password)
                        .then(this.onLogin.bind(this))

                }

            },

            googleLogin: function(){

                var provider = new firebase.auth.GoogleAuthProvider();

                auth.signInWithPopup(provider)
                    .then(this.onLogin.bind(this))

            },

            githubLogin: function(){

                var provider = new firebase.auth.GithubAuthProvider();

                auth.signInWithPopup(provider)
                    .then(this.onLogin.bind(this))

            },

            onLogin: function(response) {


            }

        });

    </script>

</dom-module>
